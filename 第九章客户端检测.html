<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>第九章客户端检测</title>
  <script>
  //能力检测，又称特性检测，目标不是特定的浏览器，而是识别浏览器的能力
  //在浏览器环境下测试任何对象的某个特性是否存在，
/*  function isHostMethod(object, property) {
	  var t = typeof object[property];
	  return t =='function' || (!!(t=='object' && object[property]))||t=='unknown';
  }
  var xhr = new ActiveXObject("Microsoft.XMLHttp");
  result = isHostMethod(xhr,"open");//true
  alert(result);
  result = isHostMethod(xhr,"foo");//false
  alert(result);*/
  //确定浏览器是否支持Netscape风格的插件，
 /* var hasNSPlugins = !!(navigator.plugins && navigator.plugins.length);
  //确定浏览器手否具有DOM1级规定的能力
  var hasDOM1 = !!(document.getElementById && document.createElement && document.getElementByTagsName);*/
  //怪癖检测的目标是识别浏览器的特殊行为，想知道浏览器存在什么缺陷
  //用户代理检测：通过检测用户代理字符串来确定使用的浏览器，优先级排在能力监测和怪癖检测之后
  //IE及更早版本中存在一个bug,如果某个实例属性与Enumerable标记为false的某个原型属性名同名，那么该实例属性将不会出现在for-in循环当中
  /*var hasDontEnumQuirk = function() {
	  var o = { toString : function(){}};
	  for(var prop in o){
		  if(prop == "toString") {
			  return false;
		  }
	  }();*/
//另一个需要检测的怪癖是Safari3以前的版本会枚举被隐藏的属性，用下面的函数检测怪癖
/*var hasEnumShadowsQuirk = function() {
	var o = {toString : function(){}};
	var count = 0;
	for(var prop in o) {
		if(prop == "toString") {
			count++;
		}
	}
	return (count > 1);
}();*/
//检测引擎
/*var ua = navigator.userAgent;
if(window.opera){
	engine.ver = window.opera.version();
	engine.opera = parseFloat(engine.ver);
}else if (/AppleWebkit\/(\S+)/.test(ua))
{
	engine.ver = RegExp["$1"];
	engine.webkit = parseFloat(engine.ver);
}else if (/KHTML\/(\S+)/.test(ua))
{
	engine.ver = RegExp["$1"];
	engine.khtml = parseFloat(engine.ver);
}else if(/rv:([^\)]+)\)Gecko\/\d{8}/.test(ua)){
	engine.ver = RegExp["$1"];
	engine.gecko = parseFloat(engine.ver);
}else if(/MSIE([^;]+)/.test(ua)){
	engine.ver =RegExp["$1"];
	engine.ie = parseFloat(engine.ver);
}*/
  //检测呈现引擎和浏览器
  /*var ua = navigator.userAgent;
  if(window.opera) {
	  engine.ver = browser.ver = window.opera.version();
	  engine.opera = browser.opera = parseFloat(engine.ver);
  }else if (/AppleWebkit\/(\S+)/.test(ua)){
	  engine.ver = RegExp["$1"];
	  engine.webkit = parseFloat(engine.ver);
	  if(/Chrome\/(\S+)/.test(ua)){
		  browser.ver = RegExp["$1"];
		  browser.chrome = parseFloat(browser.ver);
	  }else if(/Vsersion\/(\S+)/.test(ua)){
		  browser.ver = RegExp["$1"];
		  browser.safari = parseFloat(browser.ver);
	  }else {
		  var safariVersion = 1;
		  if(engine.weibkit < 100){
			  safariVersion = 1;
		  }else if(engine.webkit < 312){
			  safariVersion = 1.2;
		  }else if (engine.webkit <412){
			  safariVersion = 1.3;
		  }else {
			  safariVersion = 2;
		  }
		  browser.safari = browser.ver = safariVersion;
	  }
  }else if(/KHTML\/(/S+)/.test(ua)||/Konqueror\/([^;]+)/.test(ua)){
	  engine.ver = browser.ver =RegExp["$1"];
	  engine.khtml = browser.kong =parseFloat(engine.ver);
  }else if(/rv:([^\)]+\) Gecko\/\d{8}/.test(ua)){
	  engine.ver = RegExp["$1"];
	  engine.gecko = parseFloat(engine.ver);
	  if(/Firefox\/(\S+)/.test(ua)){
		  browser.ver = RegExp["$1"];

		  browser.firefox = parseFloat(browser.ver);
	  }
  }else if(/MSIE ([^;]+)/.test(ua)){
	  engine.ver = browser.ver = RegExp["$1"];
	  engine.ie = browser.ie = parseFloat(engine.ver);
  }*/
  //检测平台
  var p = navigator.platform;
  system.win = p.indexOf("Win") == 0;
  system.mac = p.indexOf("Mac") == 0;
  system.x11 = (p.indexOf("x11") == 0)||(p.indexOf("Linux") == 0);
  </script>
 </head>
 <body>
  
 </body>
</html>
